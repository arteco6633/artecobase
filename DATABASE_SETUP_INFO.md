# Информация о настройке базы данных

## ⚠️ Важно: Порядок выполнения SQL скриптов

База данных должна быть настроена в следующем порядке:

### 1. Основная структура документов
**Скрипт НЕ НУЖЕН** - таблица `documents` уже создана через миграцию категорий.

Старый файл `database.sql` **устарел** и содержит ссылки на удалённую колонку `category`. 
**НЕ ВЫПОЛНЯЙТЕ** этот файл - он вызовет ошибки!

### 2. Аутентификация и роли пользователей
**Файл:** `database_auth.sql`
- Создаёт таблицу `user_profiles`
- Настраивает RLS политики
- Добавляет триггеры для автоматического создания профилей

### 3. Система категорий
**Файл:** `database_categories.sql`
- Создаёт таблицу `categories`
- Мигрирует данные из старой системы
- Настраивает иерархические категории

### 4. Материалы (для парсинга)
**Файл:** `database_materials.sql` (новый)
- Создаёт таблицу `materials` для хранения данных о наличии
- Настраивает индексы и RLS
- Добавляет таблицу истории изменений (опционально)

## Текущий статус

✅ Аутентификация настроена  
✅ Категории настроены  
⏳ Материалы - нужно создать таблицу (`database_materials.sql`)

## Если возникла ошибка "column category does not exist"

Эта ошибка означает, что вы пытаетесь выполнить устаревший скрипт `database.sql`.
**Решение:** Используйте правильные скрипты из списка выше.

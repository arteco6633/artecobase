# Диагностика ошибки 500

## Текущая ситуация

✅ URL правильный: `https://artecobase.vercel.app/api/sync-availability`
✅ Функция задеплоилась (не 404)
❌ Функция падает с ошибкой 500

## Что нужно проверить

### 1. Логи в Vercel Dashboard

**Самый важный шаг!**

1. Откройте: https://vercel.com/dashboard
2. Найдите проект "artecobase"
3. Перейдите в **Deployments** → последний деплой
4. Откройте раздел **Functions**
5. Найдите `api/sync-availability`
6. Посмотрите логи ошибки

Или на странице ошибки есть ссылка "check the logs" - перейдите по ней.

### 2. Возможные причины

**A. Отсутствуют переменные окружения**
- `SUPABASE_SERVICE_ROLE_KEY` - обязателен для записи в БД
- `VITE_SUPABASE_URL` или `SUPABASE_URL`

**B. Проблема с Puppeteer**
- Puppeteer требует специальной настройки на Vercel
- Может быть проблема с размером функции
- Может превышать лимит времени (10 секунд по умолчанию)

**C. Проблема с импортами**
- TypeScript импорты могут не работать правильно
- ES modules vs CommonJS

### 3. Что делать дальше

После просмотра логов пришлите текст ошибки - я помогу исправить.

## Временное решение

Если нужно быстро протестировать, можно:
1. Упростить функцию (убрать Puppeteer)
2. Использовать простой HTTP запрос
3. Или другой подход к парсингу

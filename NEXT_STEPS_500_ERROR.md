# Следующие шаги после ошибки 500

## Текущая ситуация

✅ Функция задеплоилась (не 404)
❌ Функция падает с ошибкой 500

## Что нужно сделать

### 1. Проверить логи (ВАЖНО!)

В Vercel Dashboard:
1. Deployments → последний деплой
2. Functions → api/sync-availability
3. Посмотрите логи ошибки

**Это поможет понять точную причину ошибки.**

### 2. Возможные проблемы

**A. Отсутствуют переменные окружения**
- `SUPABASE_SERVICE_ROLE_KEY` - обязательно!
- `VITE_SUPABASE_URL` или `SUPABASE_URL`

**B. Проблема с Puppeteer**
- Puppeteer требует специальной настройки на Vercel
- Может быть проблема с размером функции
- Может превышать лимит времени выполнения

**C. Проблема с импортами**
- TypeScript импорты могут не работать правильно
- Может потребоваться CommonJS вместо ES modules

### 3. Решения

После просмотра логов:
- Если проблема с переменными - добавим их
- Если проблема с Puppeteer - упростим или используем другой подход
- Если проблема с импортами - переделаем формат

## Рекомендация

**Сначала посмотрите логи**, затем пришлите текст ошибки - я помогу исправить.

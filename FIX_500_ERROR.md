# Исправление ошибки 500 в API функции

## Статус

✅ Функция найдена (не 404)
❌ Функция падает с ошибкой 500

Это означает, что:
- Функция задеплоилась
- Но есть ошибка при выполнении

## Возможные причины

1. **Проблема с импортами** - ES modules vs CommonJS
2. **Отсутствуют переменные окружения**
3. **Ошибка в коде** (Puppeteer, Supabase)
4. **Превышен лимит времени выполнения**

## Что нужно проверить

### 1. Проверить логи в Vercel

1. Откройте Vercel Dashboard
2. Проект → Deployments → последний деплой
3. Перейдите в Functions → api/sync-availability
4. Посмотрите логи ошибок

Или:
- На странице ошибки есть ссылка "check the logs"
- Перейдите по ссылке для просмотра деталей

### 2. Возможные проблемы

**Проблема с импортами:**
Vercel Functions могут требовать CommonJS вместо ES modules для TypeScript.

**Отсутствуют переменные окружения:**
- `SUPABASE_SERVICE_ROLE_KEY` - обязателен
- `VITE_SUPABASE_URL` или `SUPABASE_URL`

**Проблема с Puppeteer:**
- Может быть проблема с Chromium на Vercel
- Проверьте размер функции (может превышать лимит)

## Решение

Нужно посмотреть логи, чтобы понять точную ошибку.
Могу переписать функцию в другом формате, если нужно.

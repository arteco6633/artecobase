# Реализация парсинга наличия материалов

## Предварительные шаги

### 1. Изучение структуры сайта dreviz-shop.ru

Сайт использует:
- Таблицу с товарами
- Колонки: Артикул, Код производителя, Бренд, Наименование, Наличие, Цена
- Пагинацию (713 товаров на 36 страниц, по 20 на страницу)
- Фильтры по категориям

### 2. Варианты реализации

#### Вариант A: Прямой парсинг HTML (если сайт статичный)
- Использовать `cheerio` для парсинга HTML
- Простой и быстрый
- Не работает, если сайт использует JavaScript для рендеринга

#### Вариант B: Headless Browser (если сайт использует JS)
- Использовать `puppeteer` или `playwright`
- Работает с динамическим контентом
- Более медленный и ресурсоемкий

#### Вариант C: API (если доступно)
- Идеальный вариант
- Нужно проверить, есть ли публичный API

## Рекомендуемый подход

1. **Сначала проверить**, можно ли получить данные через API (посмотреть Network запросы в DevTools)
2. **Если API нет**, использовать headless browser (puppeteer)
3. **Создать Supabase Edge Function** для парсинга
4. **Настроить Supabase Cron Job** для ежедневного запуска

## Структура данных на сайте

Из примера видно структуру:
```
Артикул: 00-00034625
Тиснение: PR (из названия "U1148 2750*1830*16 PR")
Наименование: ЛДСП Увадрев Дуб Золотистый U1148 2750*1830*16 PR
Наличие: 37
Цена: 3 440,00
```

Тиснение извлекается из названия (последние буквы: PR, PE, MP, SM, TS, LF и т.д.)

## Следующие шаги

1. Проверить, есть ли API у сайта
2. Создать функцию парсинга
3. Интегрировать с базой данных
4. Настроить автоматическое обновление
